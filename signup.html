<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Animated Pilot Login Form</title>
  <link href="https://fonts.googleapis.com/css2?family=Source+Sans+Pro:wght@400;600;700&display=swap" rel="stylesheet">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
  <style>
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    html, body {
      width: 100%;
      height: 100%;
      background-color: #eff3f4;
      position: relative;
      font-size: 16px;
      font-family: "Source Sans Pro", sans-serif;
      font-weight: 400;
      -webkit-font-smoothing: antialiased;
    }

    .login-form-container {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      display: block;
      width: 100%;
      max-width: 400px;
      background-color: white;
      margin: 0;
      padding: 36px;
      box-sizing: border-box;
      border: 1px solid #DDD;
      border-radius: 0.5em;
      font-family: 'Source Sans Pro', sans-serif;
    }

    .character-container {
      position: relative;
      width: 200px;
      height: 200px;
      margin: 0 auto 16px;
      border-radius: 50%;
      pointer-events: none;
    }

    .character-container::after {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      z-index: 10;
      width: 100%;
      height: 100%;
      box-sizing: border-box;
      border: 2.5px solid #217093;
      border-radius: 50%;
    }

    .svg-container {
      position: relative;
      width: 100%;
      height: 0;
      overflow: hidden;
      border-radius: 50%;
      padding-bottom: 100%;
    }

    .mySVG {
      position: absolute;
      left: 0;
      top: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
    }

    .input-group {
      margin: 0 0 32px;
      padding: 0;
      position: relative;
    }

    .input-label {
      margin: 0 0 12px;
      display: block;
      font-size: 1.25em;
      color: #217093;
      font-weight: 700;
    }

    .input-field {
      display: block;
      margin: 0;
      padding: 0 0 0 16px;
      padding-top: 0.875em;
      background-color: #f3fafd;
      border: 2px solid #217093;
      border-radius: 4px;
      appearance: none;
      box-sizing: border-box;
      width: 100%;
      height: 65px;
      font-size: 1.55em;
      color: #353538;
      font-weight: 600;
      transition: box-shadow 0.2s linear, border-color 0.25s ease-out;
    }

    .input-field:focus {
      outline: none;
      box-shadow: 0px 2px 10px rgba(0,0,0,0.1);
      border-color: #4eb8dd;
    }

    .password-field {
      padding: 0.4em 16px 0.5em;
    }

    .password-field.show-password {
      padding: 0.025em 16px;
    }

    .helper {
      position: absolute;
      z-index: 1;
      top: 0;
      left: 0;
      transform: translate(1em, 2.2em);
      transform-origin: 0 0;
      color: #217093;
      font-size: 1.55em;
      font-weight: normal;
      opacity: 0.65;
      pointer-events: none;
      transition: transform 0.2s ease-out, opacity 0.2s linear;
    }

    .input-group.focus-with-text .helper {
      transform: translate(1em, 1.55em) scale(0.6);
      opacity: 1;
    }

    .password-toggle {
      display: block;
      padding: 0 0 0 1.45em;
      position: absolute;
      top: 0.25em;
      right: 0;
      font-size: 1em;
    }

    .password-toggle input {
      position: absolute;
      z-index: -1;
      opacity: 0;
    }

    .indicator {
      position: absolute;
      top: 0;
      left: 0;
      height: 0.85em;
      width: 0.85em;
      background-color: #f3fafd;
      border: 2px solid #217093;
      border-radius: 3px;
    }

    .indicator::after {
      content: '';
      position: absolute;
      left: 0.25em;
      top: 0.025em;
      width: 0.2em;
      height: 0.5em;
      border: solid #217093;
      border-width: 0 3px 3px 0;
      transform: rotate(45deg);
      visibility: hidden;
    }

    .password-toggle input:checked + .indicator {
      border-color: #4eb8dd;
    }

    .password-toggle input:checked + .indicator::after {
      visibility: visible;
    }

    .login-button {
      display: block;
      margin: 0;
      padding: 0.65em 1em 1em;
      background-color: #4eb8dd;
      border: none;
      border-radius: 4px;
      box-sizing: border-box;
      box-shadow: none;
      width: 100%;
      height: 65px;
      font-size: 1.55em;
      color: white;
      font-weight: 600;
      transition: background-color 0.2s ease-out;
    }

    .login-button:hover, .login-button:active {
      background-color: #217093;
    }

    /* Animation keyframes */
    @keyframes eyeMove {
      0% { transform: translate(0, 0); }
      20% { transform: translate(1px, 1px); }
      40% { transform: translate(-1px, 1px); }
      60% { transform: translate(1px, -1px); }
      80% { transform: translate(-1px, -1px); }
      100% { transform: translate(0, 0); }
    }

    @keyframes armWave {
      0% { transform: rotate(0deg); }
      50% { transform: rotate(5deg); }
      100% { transform: rotate(0deg); }
    }
  </style>
</head>
<body>
  <form id="loginForm" class="login-form-container">
    <div class="character-container">
      <div class="svg-container">
        <svg id="svgElement" class="mySVG" viewBox="0 0 200 200" xmlns="http://www.w3.org/2000/svg">
          <!-- SVG Pilot Character -->
          <defs>
            <circle id="armMaskPath" cx="100" cy="100" r="100" />
            <path
              id="mouthMaskPath"
              d="M100.2,101c-0.4,0-1.4,0-1.8,0c-2.7-0.3-5.3-1.1-8-2.5c-0.7-0.3-0.9-1.2-0.6-1.8 c0.2-0.5,0.7-0.7,1.2-0.7c0.2,0,0.5,0.1,0.6,0.2c3,1.5,5.8,2.3,8.6,2.3s5.7-0.7,8.6-2.3c0.2-0.1,0.4-0.2,0.6-0.2 c0.5,0,1,0.3,1.2,0.7c0.4,0.7,0.1,1.5-0.6,1.9c-2.6,1.4-5.3,2.2-7.9,2.5C101.7,101,100.5,101,100.2,101z"
            />
            <linearGradient id="gold-gradient" x1="0%" y1="0%" x2="100%" y2="100%">
              <stop offset="0%" style="stop-color:#f9d423" />
              <stop offset="100%" style="stop-color:#e6b422" />
            </linearGradient>
          </defs>
          <clipPath id="armMask">
            <use xlink:href="#armMaskPath" />
          </clipPath>
          <clipPath id="mouthMask">
            <use xlink:href="#mouthMaskPath" />
          </clipPath>

          <circle cx="100" cy="100" r="100" fill="#4a7dbd" />

          <!-- Body - Navy Blue Uniform -->
          <g class="body">
            <path
              class="bodyBGnormal"
              id="bodyBG"
              stroke="#0a1a3a"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
              fill="#0a2550"
              d="M200,158.5c0-20.2-14.8-36.5-35-36.5h-14.9V72.8c0-27.4-21.7-50.4-49.1-50.8c-28-0.5-50.9,22.1-50.9,50v50 H35.8C16,122,0,138,0,157.8L0,213h200L200,158.5z"
            />
            <path
              class="bodyBGchanged"
              id="bodyBGchanged"
              style="display: none;"
              fill="#0a2550" 
              stroke="#0a1a3a" 
              stroke-width="2" 
              stroke-linecap="round" 
              stroke-linejoin="round"
              d="M200,122h-35h-14.9V72c0-27.6-22.4-50-50-50s-50,22.4-50,50v50H35.8H0l0,91h200L200,122z"
            />
            
            <!-- Uniform details -->
            <!-- Shirt front -->
            <path
              fill="#0a2550"
              stroke="#0a1a3a"
              stroke-width="0.5"
              d="M85,120 L85,180 L115,180 L115,120 Z"
            />
            
            <!-- Gold buttons -->
            <circle cx="100" cy="130" r="3.5" fill="url(#gold-gradient)" stroke="#e6b422" stroke-width="0.5" />
            <circle cx="100" cy="145" r="3.5" fill="url(#gold-gradient)" stroke="#e6b422" stroke-width="0.5" />
            <circle cx="100" cy="160" r="3.5" fill="url(#gold-gradient)" stroke="#e6b422" stroke-width="0.5" />
            
            <!-- Epaulettes -->
            <rect x="70" y="80" width="18" height="8" rx="2" fill="url(#gold-gradient)" stroke="#e6b422" stroke-width="0.5" />
            <rect x="112" y="80" width="18" height="8" rx="2" fill="url(#gold-gradient)" stroke="#e6b422" stroke-width="0.5" />
            
            <!-- Epaulette details -->
            <line x1="74" y1="82" x2="74" y2="86" stroke="#0a1a3a" stroke-width="1" />
            <line x1="78" y1="82" x2="78" y2="86" stroke="#0a1a3a" stroke-width="1" />
            <line x1="82" y1="82" x2="82" y2="86" stroke="#0a1a3a" stroke-width="1" />
            <line x1="116" y1="82" x2="116" y2="86" stroke="#0a1a3a" stroke-width="1" />
            <line x1="120" y1="82" x2="120" y2="86" stroke="#0a1a3a" stroke-width="1" />
            <line x1="124" y1="82" x2="124" y2="86" stroke="#0a1a3a" stroke-width="1" />
            
            <!-- Collar -->
            <path
              fill="#0a1a3a"
              d="M75,90 L85,105 L100,110 L115,105 L125,90"
            />
            
            <!-- Tie -->
            <path
              fill="#0a1a3a"
              d="M100,110 L95,125 L100,140 L105,125 Z"
            />
            
            <!-- Shoulder boards -->
            <path
              fill="#0a1a3a"
              d="M70,85 L60,95 L70,95 Z"
            />
            <path
              fill="#0a1a3a"
              d="M130,85 L140,95 L130,95 Z"
            />
          </g>

          <!-- Pilot Cap -->
          <path
            fill="#0a2550"
            stroke="#0a1a3a"
            stroke-width="1"
            d="M60,65 Q100,55 140,65 L140,75 Q100,70 60,75 Z"
          />
          
          <!-- Cap Visor -->
          <path
            fill="#0a1a3a"
            stroke="#000000"
            stroke-width="0.5"
            d="M60,65 Q100,70 140,65 L150,70 Q100,80 50,70 Z"
          />
          
          <!-- Gold braid on cap visor -->
          <path
            fill="none"
            stroke="url(#gold-gradient)"
            stroke-width="1.5"
            d="M65,67 Q100,75 135,67"
          />
          
          <!-- Cap Badge -->
          <circle cx="100" cy="65" r="8" fill="url(#gold-gradient)" stroke="#e6b422" stroke-width="0.5" />
          <path
            fill="#0a2550"
            d="M100,60 L102,67 L109,67 L103,71 L105,78 L100,74 L95,78 L97,71 L91,67 L98,67 Z"
          />
          
          <!-- Wings on badge -->
          <path
            fill="url(#gold-gradient)"
            stroke="#e6b422"
            stroke-width="0.2"
            d="M92,65 L85,62 L82,65 L85,68 L92,65 M108,65 L115,62 L118,65 L115,68 L108,65"
          />

          <!-- Face -->
          <path
            class="face"
            id="face"
            fill="#f5d7b4"
            d="M134.5,78 v22.5 c0,21.815-15.446,39.5-34.5,39.5s-34.5-17.685-34.5-39.5 V78"
          />
          
          <!-- Ears -->
          <g class="earL">
            <g class="outerEar" id="outerEarL" fill="#f0c8a0" stroke="#1a2a3a" stroke-width="1">
              <ellipse cx="65" cy="93" rx="6" ry="10" />
            </g>
            <g class="earHair" id="earHairL">
              <path
                d="M65,88 C63,88 61,90 60,93 C62,93 64,93 65,93"
                fill="#f0c8a0"
                stroke="#1a2a3a"
                stroke-width="0.5"
              />
            </g>
          </g>
          <g class="earR">
            <g class="outerEar" id="outerEarR">
              <ellipse fill="#f0c8a0" stroke="#1a2a3a" stroke-width="1" cx="135" cy="93" rx="6" ry="10" />
            </g>
            <g class="earHair" id="earHairR">
              <path
                fill="#f0c8a0"
                stroke="#1a2a3a"
                stroke-width="0.5"
                d="M135,88 C137,88 139,90 140,93 C138,93 136,93 135,93"
              />
            </g>
          </g>

          <!-- Eyebrows -->
          <g class="eyebrow" id="eyebrow">
            <path
              fill="#5a3825"
              stroke="#1a2a3a"
              stroke-width="0.5"
              d="M75,85 Q85,80 95,85"
            />
            <path
              fill="#5a3825"
              stroke="#1a2a3a"
              stroke-width="0.5"
              d="M125,85 Q115,80 105,85"
            />
          </g>

          <!-- Eyes -->
          <g class="eyeL" id="eyeL">
            <circle cx="85" cy="95" r="5" fill="white" stroke="#1a2a3a" stroke-width="0.5" />
            <circle cx="85" cy="95" r="2.5" fill="#1a2a3a" />
            <circle cx="83.5" cy="93.5" r="1" fill="white" />
          </g>
          <g class="eyeR" id="eyeR">
            <circle cx="115" cy="95" r="5" fill="white" stroke="#1a2a3a" stroke-width="0.5" />
            <circle cx="115" cy="95" r="2.5" fill="#1a2a3a" />
            <circle cx="113.5" cy="93.5" r="1" fill="white" />
          </g>

          <!-- Nose -->
          <path
            class="nose"
            id="nose"
            d="M97 95h6c1.5 0 2 1.5 1 3l-3 4c-1 1.5-2 1.5-3 0l-3-4c-1-1.5 0-3 2-3z"
            fill="#f0c8a0"
            stroke="#1a2a3a"
            stroke-width="0.5"
          />

          <!-- Mouth -->
          <g class="mouth" id="mouth">
            <path
              class="mouthBG"
              id="mouthBG"
              fill="#f05a28"
              d="M100.2,115c-0.4,0-1.4,0-1.8,0c-2.7-0.3-5.3-1.1-8-2.5c-0.7-0.3-0.9-1.2-0.6-1.8 c0.2-0.5,0.7-0.7,1.2-0.7c0.2,0,0.5,0.1,0.6,0.2c3,1.5,5.8,2.3,8.6,2.3s5.7-0.7,8.6-2.3c0.2-0.1,0.4-0.2,0.6-0.2 c0.5,0,1,0.3,1.2,0.7c0.4,0.7,0.1,1.5-0.6,1.9c-2.6,1.4-5.3,2.2-7.9,2.5C101.7,115,100.5,115,100.2,115z"
            />
            <path
              class="mouthSmallBG"
              id="mouthSmallBG"
              fill="#f05a28"
              d="M100.2,115c-0.4,0-1.4,0-1.8,0c-2.7-0.3-5.3-1.1-8-2.5c-0.7-0.3-0.9-1.2-0.6-1.8 c0.2-0.5,0.7-0.7,1.2-0.7c0.2,0,0.5,0.1,0.6,0.2c3,1.5,5.8,2.3,8.6,2.3s5.7-0.7,8.6-2.3c0.2-0.1,0.4-0.2,0.6-0.2 c0.5,0,1,0.3,1.2,0.7c0.4,0.7,0.1,1.5-0.6,1.9c-2.6,1.4-5.3,2.2-7.9,2.5C101.7,115,100.5,115,100.2,115z"
            />
            <path
              class="mouthMediumBG"
              id="mouthMediumBG"
              style="display: none;"
              fill="#f05a28"
              d="M95,118.2c-4.5,0-8.2-3.7-8.2-8.2v-2c0-1.2,1-2.2,2.2-2.2h22c1.2,0,2.2,1,2.2,2.2v2 c0,4.5-3.7,8.2-8.2,8.2H95z"
            />
            <path
              class="mouthLargeBG"
              id="mouthLargeBG"
              style="display: none;"
              fill="#f05a28"
              stroke="#1a2a3a"
              stroke-linejoin="round"
              stroke-width="1"
              d="M100 124c-9 0-16.2-7.3-16.2-16.2 0-2.3 1.9-4.2 4.2-4.2h24c2.3 0 4.2 1.9 4.2 4.2 0 9-7.2 16.2-16.2 16.2z"
            />
            <g clip-path="url(#mouthMask)">
              <g class="tongue" id="tongue">
                <circle cx="100" cy="121" r="8" fill="#cc4a6c" />
                <ellipse class="tongueHighlight" cx="100" cy="114.5" rx="3" ry="1.5" opacity=".1" fill="#fff" />
              </g>
            </g>
            <path
              clip-path="url(#mouthMask)"
              class="tooth"
              id="tooth"
              style="fill: #FFFFFF;"
              d="M106,111h-4c-1.1,0-2-0.9-2-2v-2h8v2C108,110.1,107.1,111,106,111z"
            />
            <path
              class="mouthOutline"
              id="mouthOutline"
              fill="none"
              stroke="#1a2a3a"
              stroke-width="1"
              stroke-linejoin="round"
              d="M100.2,115c-0.4,0-1.4,0-1.8,0c-2.7-0.3-5.3-1.1-8-2.5c-0.7-0.3-0.9-1.2-0.6-1.8 c0.2-0.5,0.7-0.7,1.2-0.7c0.2,0,0.5,0.1,0.6,0.2c3,1.5,5.8,2.3,8.6,2.3s5.7-0.7,8.6-2.3c0.2-0.1,0.4-0.2,0.6-0.2 c0.5,0,1,0.3,1.2,0.7c0.4,0.7,0.1,1.5-0.6,1.9c-2.6,1.4-5.3,2.2-7.9,2.5C101.7,115,100.5,115,100.2,115z"
            />
          </g>

          <!-- Chin/Jaw -->
          <path
            class="chin"
            id="chin"
            d="M85 125c3 3 6 5.5 10 7.5l1-4.5c3 2.5 6 4.5 10 6.5 0-2 0-4 0-6 3 1 6 2 10 2.5 0-2-1-4-1-6"
            fill="none"
            stroke="#1a2a3a"
            stroke-width="0.5"
            stroke-linecap="round"
            stroke-linejoin="round"
          />

          <!-- Arms -->
          <g class="arms" clip-path="url(#armMask)">
            <g class="armL" id="armL" style="visibility: hidden;">
              <path
                fill="#f5d7b4"
                stroke="#1a2a3a"
                stroke-width="1"
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-miterlimit="10"
                d="M121.3,98.4 L111,59.7 L149.8,49.3 L169.8,85.4 Z"
              />
              <path
                fill="#f5d7b4"
                stroke="#1a2a3a"
                stroke-width="1"
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-miterlimit="10"
                d="M134.4,53.5l19.3-5.2c2.7-0.7,5.4,0.9,6.1,3.5v0c0.7,2.7-0.9,5.4-3.5,6.1l-10.3,2.8"
              />
              <path
                fill="#f5d7b4"
                stroke="#1a2a3a"
                stroke-width="1"
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-miterlimit="10"
                d="M150.9,59.4l26-7c2.7-0.7,5.4,0.9,6.1,3.5v0c0.7,2.7-0.9,5.4-3.5,6.1l-21.3,5.7"
              />
              <g class="twoFingers" id="twoFingers">
                <path
                  fill="#f5d7b4"
                  stroke="#1a2a3a"
                  stroke-width="1"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-miterlimit="10"
                  d="M158.3,67.8l23.1-6.2c2.7-0.7,5.4,0.9,6.1,3.5v0c0.7,2.7-0.9,5.4-3.5,6.1l-23.1,6.2"
                />
                <path
                  fill="#e6c9a8"
                  d="M180.1,65l2.2-0.6c1.1-0.3,2.2,0.3,2.4,1.4v0c0.3,1.1-0.3,2.2-1.4,2.4l-2.2,0.6L180.1,65z"
                />
                <path
                  fill="#f5d7b4"
                  stroke="#1a2a3a"
                  stroke-width="1"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-miterlimit="10"
                  d="M160.8,77.5l19.4-5.2c2.7-0.7,5.4,0.9,6.1,3.5v0c0.7,2.7-0.9,5.4-3.5,6.1l-18.3,4.9"
                />
                <path
                  fill="#e6c9a8"
                  d="M178.8,75.7l2.2-0.6c1.1-0.3,2.2,0.3,2.4,1.4v0c0.3,1.1-0.3,2.2-1.4,2.4l-2.2,0.6L178.8,75.7z"
                />
              </g>
            </g>
            <g class="armR" id="armR" style="visibility: hidden;">
              <path
                fill="#f5d7b4"
                stroke="#1a2a3a"
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-miterlimit="10"
                stroke-width="1"
                d="M265.4 97.3l10.4-38.6-38.9-10.5-20 36.1z"
              />
              <path
                fill="#f5d7b4"
                stroke="#1a2a3a"
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-miterlimit="10"
                stroke-width="1"
                d="M252.4 52.4L233 47.2c-2.7-.7-5.4.9-6.1 3.5-.7 2.7.9 5.4 3.5 6.1l10.3 2.8M226 76.4l-19.4-5.2c-2.7-.7-5.4.9-6.1 3.5-.7 2.7.9 5.4 3.5 6.1l18.3 4.9M228.4 66.7l-23.1-6.2c-2.7-.7-5.4.9-6.1 3.5-.7 2.7.9 5.4 3.5 6.1l23.1 6.2M235.8 58.3l-26-7c-2.7-.7-5.4.9-6.1 3.5-.7 2.7.9 5.4 3.5 6.1l21.3 5.7"
              />
            </g>
          </g>
          
          <!-- Pilot Sunglasses (when covering eyes) -->
          <g id="sunglasses" style="visibility: hidden;">
            <path
              fill="#1a1a1a"
              stroke="#000000"
              stroke-width="0.5"
              d="M75,92 Q85,87 95,92 L95,98 Q85,103 75,98 Z"
            />
            <path
              fill="#1a1a1a"
              stroke="#000000"
              stroke-width="0.5"
              d="M105,92 Q115,87 125,92 L125,98 Q115,103 105,98 Z"
            />
            <path
              fill="none"
              stroke="#e6b422"
              stroke-width="1"
              d="M95,95 L105,95"
            />
            <!-- Reflection on glasses -->
            <path
              fill="#ffffff"
              opacity="0.2"
              d="M78,93 L82,92 L85,93 L82,94 Z"
            />
            <path
              fill="#ffffff"
              opacity="0.2"
              d="M108,93 L112,92 L115,93 L112,94 Z"
            />
          </g>
        </svg>
      </div>
    </div>

    <div class="input-group" id="emailGroup">
      <label for="loginEmail" id="loginEmailLabel" class="input-label">
        Email
      </label>
      <input
        type="email"
        id="loginEmail"
        class="input-field"
        maxlength="254"
      />
      <p class="helper" id="emailHelper">
        email@domain.com
      </p>
    </div>

    <div class="input-group" id="passwordGroup">
      <label for="loginPassword" id="loginPasswordLabel" class="input-label">
        Password
      </label>
      <input
        type="password"
        id="loginPassword"
        class="input-field password-field"
      />
      <label
        id="showPasswordToggle"
        for="showPasswordCheck"
        class="password-toggle"
      >
        Show
        <input
          id="showPasswordCheck"
          type="checkbox"
        />
        <div class="indicator"></div>
      </label>
    </div>

    <div class="input-group">
      <button
        id="login"
        type="submit"
        class="login-button"
      >
        Log in
      </button>
    </div>
  </form>

  <script>
    // DOM Elements
    const svgElement = document.getElementById('svgElement');
    const emailInput = document.getElementById('loginEmail');
    const passwordInput = document.getElementById('loginPassword');
    const showPasswordCheck = document.getElementById('showPasswordCheck');
    const emailGroup = document.getElementById('emailGroup');
    const passwordGroup = document.getElementById('passwordGroup');
    const loginForm = document.getElementById('loginForm');
    const emailHelper = document.getElementById('emailHelper');

    // SVG Elements
    const eyeL = document.getElementById('eyeL');
    const eyeR = document.getElementById('eyeR');
    const nose = document.getElementById('nose');
    const mouth = document.getElementById('mouth');
    const mouthBG = document.getElementById('mouthBG');
    const mouthSmallBG = document.getElementById('mouthSmallBG');
    const mouthMediumBG = document.getElementById('mouthMediumBG');
    const mouthLargeBG = document.getElementById('mouthLargeBG');
    const mouthMaskPath = document.getElementById('mouthMaskPath');
    const mouthOutline = document.getElementById('mouthOutline');
    const tooth = document.getElementById('tooth');
    const tongue = document.getElementById('tongue');
    const chin = document.getElementById('chin');
    const face = document.getElementById('face');
    const eyebrow = document.getElementById('eyebrow');
    const outerEarL = document.getElementById('outerEarL');
    const outerEarR = document.getElementById('outerEarR');
    const earHairL = document.getElementById('earHairL');
    const earHairR = document.getElementById('earHairR');
    const armL = document.getElementById('armL');
    const armR = document.getElementById('armR');
    const bodyBG = document.getElementById('bodyBG');
    const bodyBGchanged = document.getElementById('bodyBGchanged');
    const twoFingers = document.getElementById('twoFingers');
    const sunglasses = document.getElementById('sunglasses');

    // State variables
    let email = '';
    let password = '';
    let emailFocused = false;
    let passwordFocused = false;
    let eyesCovered = false;
    let mouthStatus = 'small';
    let eyeScale = 1;
    let activeElement = null;
    let showPasswordClicked = false;
    let blinking = null;
    let coords = {
      svgCoords: { x: 0, y: 0 },
      emailCoords: { x: 0, y: 0 },
      screenCenter: 0,
      eyeLCoords: { x: 0, y: 0 },
      eyeRCoords: { x: 0, y: 0 },
      noseCoords: { x: 0, y: 0 },
      mouthCoords: { x: 0, y: 0 },
      emailScrollMax: 0
    };

    // Initialize form and measurements
    function initLoginForm() {
      if (!svgElement || !emailInput) return;

      // Get positions
      const svgCoords = getPosition(svgElement);
      const emailCoords = getPosition(emailInput);
      const screenCenter = svgCoords.x + svgElement.offsetWidth / 2;

      // Set eye coordinates
      const eyeLCoords = { x: svgCoords.x + 84, y: svgCoords.y + 76 };
      const eyeRCoords = { x: svgCoords.x + 113, y: svgCoords.y + 76 };
      const noseCoords = { x: svgCoords.x + 97, y: svgCoords.y + 81 };
      const mouthCoords = { x: svgCoords.x + 100, y: svgCoords.y + 100 };

      // Determine email scroll max
      const emailScrollMax = emailInput.scrollWidth;

      coords = {
        svgCoords,
        emailCoords,
        screenCenter,
        eyeLCoords,
        eyeRCoords,
        noseCoords,
        mouthCoords,
        emailScrollMax
      };

      // Set initial arm positions
      if (armL && armR) {
        gsap.set(armL, { x: -93, y: 220, rotation: 105, transformOrigin: "top left" });
        gsap.set(armR, { x: -93, y: 220, rotation: -105, transformOrigin: "top right" });
      }

      // Set initial mouth property
      if (mouth) {
        gsap.set(mouth, { transformOrigin: "center center" });
      }

      // Start blinking
      startBlinking(5);

      // Check if mobile device
      if (isMobileDevice()) {
        showPasswordCheck.checked = true;
        if (twoFingers) {
          gsap.set(twoFingers, {
            transformOrigin: "bottom left",
            rotation: 30,
            x: -9,
            y: -2,
            ease: "power2.inOut"
          });
        }
      }
    }

    // Handle email input to animate character
    function onEmailInput() {
      calculateFaceMove();

      const value = email;

      // Very crude email validation to trigger effects
      if (value.length > 0) {
        if (mouthStatus === 'small') {
          mouthStatus = 'medium';

          if (mouthBG && mouthOutline && mouthMaskPath) {
            // Hide small mouth, show medium mouth
            if (mouthSmallBG) mouthSmallBG.style.display = 'none';
            if (mouthMediumBG) mouthMediumBG.style.display = 'block';
            if (mouthLargeBG) mouthLargeBG.style.display = 'none';

            // Update the main mouth path to match medium
            if (mouthBG && mouthMediumBG) {
              mouthBG.setAttribute('d', mouthMediumBG.getAttribute('d') || '');
            }
            if (mouthOutline && mouthMediumBG) {
              mouthOutline.setAttribute('d', mouthMediumBG.getAttribute('d') || '');
            }
            if (mouthMaskPath && mouthMediumBG) {
              mouthMaskPath.setAttribute('d', mouthMediumBG.getAttribute('d') || '');
            }
          }

          if (tooth) {
            gsap.to(tooth, { duration: 1, x: 0, y: 0, ease: "expo.out" });
          }

          if (tongue) {
            gsap.to(tongue, { duration: 1, x: 0, y: 1, ease: "expo.out" });
          }

          if (eyeL && eyeR) {
            gsap.to([eyeL, eyeR], {
              duration: 1,
              scaleX: 0.85,
              scaleY: 0.85,
              ease: "expo.out"
            });
          }

          eyeScale = 0.85;
        }

        if (value.includes('@')) {
          mouthStatus = 'large';

          if (mouthBG && mouthOutline && mouthMaskPath) {
            // Hide small and medium mouths, show large mouth
            if (mouthSmallBG) mouthSmallBG.style.display = 'none';
            if (mouthMediumBG) mouthMediumBG.style.display = 'none';
            if (mouthLargeBG) mouthLargeBG.style.display = 'block';

            // Update the main mouth path to match large
            if (mouthBG && mouthLargeBG) {
              mouthBG.setAttribute('d', mouthLargeBG.getAttribute('d') || '');
            }
            if (mouthOutline && mouthLargeBG) {
              mouthOutline.setAttribute('d', mouthLargeBG.getAttribute('d') || '');
            }
            if (mouthMaskPath && mouthLargeBG) {
              mouthMaskPath.setAttribute('d', mouthLargeBG.getAttribute('d') || '');
            }
          }

          if (tooth) {
            gsap.to(tooth, { duration: 1, x: 3, y: -2, ease: "expo.out" });
          }

          if (tongue) {
            gsap.to(tongue, { duration: 1, y: 2, ease: "expo.out" });
          }

          if (eyeL && eyeR) {
            gsap.to([eyeL, eyeR], {
              duration: 1,
              scaleX: 0.65,
              scaleY: 0.65,
              transformOrigin: "center center",
              ease: "expo.out"
            });
          }

          eyeScale = 0.65;
        } else if (mouthStatus !== 'medium') {
          mouthStatus = 'medium';

          if (mouthBG && mouthOutline && mouthMaskPath) {
            // Hide small and large mouths, show medium mouth
            if (mouthSmallBG) mouthSmallBG.style.display = 'none';
            if (mouthMediumBG) mouthMediumBG.style.display = 'block';
            if (mouthLargeBG) mouthLargeBG.style.display = 'none';

            // Update the main mouth path to match medium
            if (mouthBG && mouthMediumBG) {
              mouthBG.setAttribute('d', mouthMediumBG.getAttribute('d') || '');
            }
            if (mouthOutline && mouthMediumBG) {
              mouthOutline.setAttribute('d', mouthMediumBG.getAttribute('d') || '');
            }
            if (mouthMaskPath && mouthMediumBG) {
              mouthMaskPath.setAttribute('d', mouthMediumBG.getAttribute('d') || '');
            }
          }

          if (tooth) {
            gsap.to(tooth, { duration: 1, x: 0, y: 0, ease: "expo.out" });
          }

          if (tongue) {
            gsap.to(tongue, { duration: 1, x: 0, y: 1, ease: "expo.out" });
          }

          if (eyeL && eyeR) {
            gsap.to([eyeL, eyeR], {
              duration: 1,
              scaleX: 0.85,
              scaleY: 0.85,
              ease: "expo.out"
            });
          }

          eyeScale = 0.85;
        }
      } else {
        mouthStatus = 'small';

        if (mouthBG && mouthOutline && mouthMaskPath) {
          // Hide medium and large mouths, show small mouth
          if (mouthSmallBG) mouthSmallBG.style.display = 'block';
          if (mouthMediumBG) mouthMediumBG.style.display = 'none';
          if (mouthLargeBG) mouthLargeBG.style.display = 'none';

          // Update the main mouth path to match small
          if (mouthBG && mouthSmallBG) {
            mouthBG.setAttribute('d', mouthSmallBG.getAttribute('d') || '');
          }
          if (mouthOutline && mouthSmallBG) {
            mouthOutline.setAttribute('d', mouthSmallBG.getAttribute('d') || '');
          }
          if (mouthMaskPath && mouthSmallBG) {
            mouthMaskPath.setAttribute('d', mouthSmallBG.getAttribute('d') || '');
          }
        }

        if (tooth) {
          gsap.to(tooth, { duration: 1, x: 0, y: 0, ease: "expo.out" });
        }

        if (tongue) {
          gsap.to(tongue, { duration: 1, y: 0, ease: "expo.out" });
        }

        if (eyeL && eyeR) {
          gsap.to([eyeL, eyeR], {
            duration: 1,
            scaleX: 1,
            scaleY: 1,
            ease: "expo.out"
          });
        }

        eyeScale = 1;
      }
    }

    // Calculate face movement based on cursor position
    function calculateFaceMove() {
      if (!emailInput || !eyeL || !eyeR) return;

      const carPos = emailInput.selectionEnd || email.length;
      const div = document.createElement('div');
      const span = document.createElement('span');
      const copyStyle = getComputedStyle(emailInput);
      let caretCoords = { x: 0, y: 0 };

      // Copy styles to div
      Object.values(copyStyle).forEach(prop => {
        if (typeof prop === 'string') {
          div.style.setProperty(prop, copyStyle.getPropertyValue(prop));
        }
      });

      div.style.position = 'absolute';
      document.body.appendChild(div);
      div.textContent = email.substr(0, carPos);
      span.textContent = email.substr(carPos) || '.';
      div.appendChild(span);

      const { emailCoords, screenCenter, eyeLCoords, eyeRCoords, noseCoords, mouthCoords, emailScrollMax } = coords;

      if (emailInput.scrollWidth <= emailScrollMax) {
        caretCoords = getPosition(span);
        const dFromC = screenCenter - (caretCoords.x + emailCoords.x);

        const eyeLAngle = getAngle(eyeLCoords.x, eyeLCoords.y, emailCoords.x + caretCoords.x, emailCoords.y + 25);
        const eyeRAngle = getAngle(eyeRCoords.x, eyeRCoords.y, emailCoords.x + caretCoords.x, emailCoords.y + 25);
        const noseAngle = getAngle(noseCoords.x, noseCoords.y, emailCoords.x + caretCoords.x, emailCoords.y + 25);
        const mouthAngle = getAngle(mouthCoords.x, mouthCoords.y, emailCoords.x + caretCoords.x, emailCoords.y + 25);

        const eyeLX = Math.cos(eyeLAngle) * 20;
        const eyeLY = Math.sin(eyeLAngle) * 10;
        const eyeRX = Math.cos(eyeRAngle) * 20;
        const eyeRY = Math.sin(eyeRAngle) * 10;
        const noseX = Math.cos(noseAngle) * 23;
        const noseY = Math.sin(noseAngle) * 10;
        const mouthX = Math.cos(mouthAngle) * 23;
        const mouthY = Math.sin(mouthAngle) * 10;
        const mouthR = Math.cos(mouthAngle) * 6;
        const chinX = mouthX * 0.8;
        const chinY = mouthY * 0.5;

        let chinS = 1 - (dFromC * 0.15) / 100;
        if (chinS > 1) {
          chinS = 1 - (chinS - 1);
          if (chinS < 0.5) {
            chinS = 0.5;
          }
        }

        const faceX = mouthX * 0.3;
        const faceY = mouthY * 0.4;
        const faceSkew = Math.cos(mouthAngle) * 5;
        const eyebrowSkew = Math.cos(mouthAngle) * 25;
        const outerEarX = Math.cos(mouthAngle) * 4;
        const outerEarY = Math.cos(mouthAngle) * 5;
        const hairX = Math.cos(mouthAngle) * 6;
        const hairS = 1.2;

        // Animate face parts
        if (eyeL && eyeR) {
          gsap.to(eyeL, { duration: 1, x: -eyeLX, y: -eyeLY, ease: "expo.out" });
          gsap.to(eyeR, { duration: 1, x: -eyeRX, y: -eyeRY, ease: "expo.out" });
        }

        if (nose) {
          gsap.to(nose, {
            duration: 1,
            x: -noseX,
            y: -noseY,
            rotation: mouthR,
            transformOrigin: "center center",
            ease: "expo.out"
          });
        }

        if (mouth) {
          gsap.to(mouth, {
            duration: 1,
            x: -mouthX,
            y: -mouthY,
            rotation: mouthR,
            transformOrigin: "center center",
            ease: "expo.out"
          });
        }

        if (chin) {
          gsap.to(chin, { duration: 1, x: -chinX, y: -chinY, scaleY: chinS, ease: "expo.out" });
        }

        if (face) {
          gsap.to(face, {
            duration: 1,
            x: -faceX,
            y: -faceY,
            skewX: -faceSkew,
            transformOrigin: "center top",
            ease: "expo.out"
          });
        }

        if (eyebrow) {
          gsap.to(eyebrow, {
            duration: 1,
            x: -faceX,
            y: -faceY,
            skewX: -eyebrowSkew,
            transformOrigin: "center top",
            ease: "expo.out"
          });
        }

        if (outerEarL && outerEarR) {
          gsap.to(outerEarL, { duration: 1, x: outerEarX, y: -outerEarY, ease: "expo.out" });
          gsap.to(outerEarR, { duration: 1, x: outerEarX, y: outerEarY, ease: "expo.out" });
        }

        if (earHairL && earHairR) {
          gsap.to(earHairL, { duration: 1, x: -outerEarX, y: -outerEarY, ease: "expo.out" });
          gsap.to(earHairR, { duration: 1, x: -outerEarX, y: outerEarY, ease: "expo.out" });
        }
      }

      document.body.removeChild(div);
    }

    // Reset face to neutral position
    function resetFace() {
      if (!eyeL || !eyeR) return;

      gsap.to([eyeL, eyeR], { duration: 1, x: 0, y: 0, ease: "expo.out" });

      if (nose) {
        gsap.to(nose, { duration: 1, x: 0, y: 0, scaleX: 1, scaleY: 1, ease: "expo.out" });
      }

      if (mouth) {
        gsap.to(mouth, { duration: 1, x: 0, y: 0, rotation: 0, ease: "expo.out" });
      }

      if (chin) {
        gsap.to(chin, { duration: 1, x: 0, y: 0, scaleY: 1, ease: "expo.out" });
      }

      if (face && eyebrow) {
        gsap.to([face, eyebrow], { duration: 1, x: 0, y: 0, skewX: 0, ease: "expo.out" });
      }

      if (outerEarL && outerEarR && earHairL && earHairR) {
        gsap.to([outerEarL, outerEarR, earHairL, earHairR], {
          duration: 1,
          x: 0,
          y: 0,
          scaleY: 1,
          ease: "expo.out"
        });
      }
    }

    // Cover eyes when password field is focused
    function coverEyes() {
      if (!armL || !armR || !bodyBG || !bodyBGchanged) return;

      gsap.killTweensOf([armL, armR]);
      
      // For the pilot, we'll just make the sunglasses visible
      gsap.set([armL, armR], { visibility: "hidden" });
      
      // Show sunglasses
      if (sunglasses) {
        sunglasses.style.visibility = "visible";
      }
      
      if (bodyBG && bodyBGchanged) {
        // Copy the path data from bodyBGchanged to bodyBG
        const newPath = bodyBGchanged.getAttribute('d');
        if (newPath) {
          bodyBG.setAttribute('d', newPath);
        }
      }
      
      eyesCovered = true;
    }

    // Uncover eyes when password field loses focus
    function uncoverEyes() {
      if (!armL || !armR || !bodyBG || !bodyBGchanged) return;

      gsap.killTweensOf([armL, armR]);

      // Hide sunglasses
      if (sunglasses) {
        sunglasses.style.visibility = "hidden";
      }

      gsap.to(armL, { duration: 1.35, y: 220, ease: "quad.out" });
      gsap.to(armL, { duration: 1.35, rotation: 105, ease: "quad.out", delay: 0.1 });
      gsap.to(armR, { duration: 1.35, y: 220, ease: "quad.out" });
      gsap.to(armR, {
        duration: 1.35,
        rotation: -105,
        ease: "quad.out",
        delay: 0.1,
        onComplete: () => {
          gsap.set([armL, armR], { visibility: "hidden" });
        }
      });

      if (bodyBG) {
        // Reset the path data to the original
        const originalPath =
          "M200,158.5c0-20.2-14.8-36.5-35-35.5h-14.9V72.8c0-27.4-21.7-50.4-49.1-50.8c-28-0.5-50.9,22.1-50.9,50v50 H35.8C16,122,0,138,0,157.8L0,213h200L200,158.5z";
        bodyBG.setAttribute("d", originalPath);
      }

      eyesCovered = false;
    }

    // Spread fingers when showing password
    function spreadFingers() {
      if (!twoFingers) return;

      gsap.to(twoFingers, {
        duration: 0.35,
        transformOrigin: "bottom left",
        rotation: 30,
        x: -9,
        y: -2,
        ease: "power2.inOut"
      });
    }

    // Close fingers when hiding password
    function closeFingers() {
      if (!twoFingers) return;

      gsap.to(twoFingers, {
        duration: 0.35,
        transformOrigin: "bottom left",
        rotation: 0,
        x: 0,
        y: 0,
        ease: "power2.inOut"
      });
    }

    // Start blinking animation
    function startBlinking(delay = 1) {
      if (!eyeL || !eyeR) return;

      if (delay) {
        delay = getRandomInt(delay);
      }

      blinking = gsap.to([eyeL, eyeR], {
        duration: 0.1,
        delay,
        scaleY: 0,
        yoyo: true,
        repeat: 1,
        transformOrigin: "center center",
        onComplete: () => {
          startBlinking(12);
        }
      });
    }

    // Stop blinking animation
    function stopBlinking() {
      if (blinking) {
        blinking.kill();
        blinking = null;
      }

      if (eyeL && eyeR) {
        gsap.set([eyeL, eyeR], { scaleY: eyeScale });
      }
    }

    // Event handlers
    function onEmailFocus() {
      activeElement = 'email';
      emailFocused = true;
      emailGroup.classList.add('focus-with-text');
      stopBlinking();
      calculateFaceMove();
      onEmailInput();
    }

    function onEmailBlur() {
      emailFocused = false;
      activeElement = null;
      
      if (email === '') {
        emailGroup.classList.remove('focus-with-text');
      }

      setTimeout(() => {
        if (activeElement !== 'email') {
          startBlinking();
          resetFace();
        }
      }, 100);
    }

    function onPasswordFocus() {
      activeElement = 'password';
      passwordFocused = true;

      if (!eyesCovered) {
        coverEyes();
      }
    }

    function onPasswordBlur() {
      passwordFocused = false;
      activeElement = null;

      setTimeout(() => {
        if (activeElement !== 'toggle' && activeElement !== 'password') {
          uncoverEyes();
        }
      }, 100);
    }

    function onPasswordToggleFocus() {
      activeElement = 'toggle';

      if (!eyesCovered) {
        coverEyes();
      }
    }

    function onPasswordToggleBlur() {
      activeElement = null;

      if (!showPasswordClicked) {
        setTimeout(() => {
          if (activeElement !== 'password' && activeElement !== 'toggle') {
            uncoverEyes();
          }
        }, 100);
      }
    }

    function onPasswordToggleMouseDown() {
      showPasswordClicked = true;
    }

    function onPasswordToggleMouseUp() {
      showPasswordClicked = false;
    }

    function onPasswordToggleChange(e) {
      const isChecked = e.target.checked;
      
      if (isChecked) {
        passwordInput.type = 'text';
        passwordInput.classList.remove('password-field');
        passwordInput.classList.add('show-password');
      } else {
        passwordInput.type = 'password';
        passwordInput.classList.add('password-field');
        passwordInput.classList.remove('show-password');
      }

      setTimeout(() => {
        if (isChecked) {
          spreadFingers();
        } else {
          closeFingers();
        }
      }, 100);
    }

    // Helper functions
    function getRandomInt(max) {
      return Math.floor(Math.random() * Math.floor(max));
    }

    function getAngle(x1, y1, x2, y2) {
      return Math.atan2(y1 - y2, x1 - x2);
    }

    function getPosition(el) {
      let xPos = 0;
      let yPos = 0;
      let element = el;

      while (element) {
        if (element.tagName === 'BODY') {
          // Deal with browser quirks with body/window/document and page scroll
          const xScroll = element.scrollLeft || document.documentElement.scrollLeft;
          const yScroll = element.scrollTop || document.documentElement.scrollTop;

          xPos += element.offsetLeft - xScroll + element.clientLeft;
          yPos += element.offsetTop - yScroll + element.clientTop;
        } else {
          // For all other non-BODY elements
          xPos += element.offsetLeft - element.scrollLeft + element.clientLeft;
          yPos += element.offsetTop - element.scrollTop + element.clientTop;
        }

        element = element.offsetParent;
      }

      return { x: xPos, y: yPos };
    }

    function isMobileDevice() {
      return /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
    }

    // Handle form submission
    function handleSubmit(e) {
      e.preventDefault();
      console.log("Login attempt with:", { email, password });
    }

    // Event listeners
    emailInput.addEventListener('focus', onEmailFocus);
    emailInput.addEventListener('blur', onEmailBlur);
    emailInput.addEventListener('input', (e) => {
      email = e.target.value;
      onEmailInput();
    });

    passwordInput.addEventListener('focus', onPasswordFocus);
    passwordInput.addEventListener('blur', onPasswordBlur);
    passwordInput.addEventListener('input', (e) => {
      password = e.target.value;
    });

    showPasswordCheck.addEventListener('focus', onPasswordToggleFocus);
    showPasswordCheck.addEventListener('blur', onPasswordToggleBlur);
    showPasswordCheck.addEventListener('mousedown', onPasswordToggleMouseDown);
    showPasswordCheck.addEventListener('mouseup', onPasswordToggleMouseUp);
    showPasswordCheck.addEventListener('change', onPasswordToggleChange);

    loginForm.addEventListener('submit', handleSubmit);

    // Initialize after a short delay to ensure all elements are loaded
    setTimeout(initLoginForm, 500);

    // Add window resize listener to recalculate positions
    window.addEventListener('resize', initLoginForm);
  </script>
</body>
</html>
